ARM GAS  C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/main.c"
  20              		.section	.text.main,"ax",%progbits
  21              		.align	1
  22              		.global	main
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	main:
  28              	.LFB130:
   1:Core/Src/main.c **** #include "init.h"
   2:Core/Src/main.c **** 
   3:Core/Src/main.c **** int main(void) {
  29              		.loc 1 3 16 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 83B0     		sub	sp, sp, #12
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
   4:Core/Src/main.c ****     GPIO_Ini();
  40              		.loc 1 4 5 view .LVU1
  41 0004 FFF7FEFF 		bl	GPIO_Ini
  42              	.LVL0:
   5:Core/Src/main.c ****     uint8_t ledIndex = 0; // 当前点亮的LED索引
  43              		.loc 1 5 5 view .LVU2
   6:Core/Src/main.c ****     uint8_t buttonPressCount = 0; // 按钮按下计数
  44              		.loc 1 6 5 view .LVU3
  45              		.loc 1 6 13 is_stmt 0 view .LVU4
  46 0008 0021     		movs	r1, #0
   5:Core/Src/main.c ****     uint8_t ledIndex = 0; // 当前点亮的LED索引
  47              		.loc 1 5 13 view .LVU5
  48 000a 0846     		mov	r0, r1
  49 000c 1CE0     		b	.L3
  50              	.LVL1:
  51              	.L5:
ARM GAS  C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s 			page 2


  52              	.LBB2:
   7:Core/Src/main.c **** 
   8:Core/Src/main.c ****     while(1) {
   9:Core/Src/main.c ****         // 检测按钮是否按下
  10:Core/Src/main.c ****         if(READ_GPIO_C13 == 0) {
  11:Core/Src/main.c ****             for (volatile int i = 0; i < 100000; i++); // 简单去抖动
  53              		.loc 1 11 51 is_stmt 1 discriminator 3 view .LVU6
  54 000e 019B     		ldr	r3, [sp, #4]
  55 0010 0133     		adds	r3, r3, #1
  56 0012 0193     		str	r3, [sp, #4]
  57              	.L4:
  58              		.loc 1 11 40 discriminator 1 view .LVU7
  59 0014 019A     		ldr	r2, [sp, #4]
  60 0016 2E4B     		ldr	r3, .L21
  61 0018 9A42     		cmp	r2, r3
  62 001a F8DD     		ble	.L5
  63              	.L6:
  64              	.LBE2:
  12:Core/Src/main.c ****             while (READ_GPIO_C13 == 0); // 等待按钮释放
  65              		.loc 1 12 34 discriminator 1 view .LVU8
  66              		.loc 1 12 20 is_stmt 0 discriminator 1 view .LVU9
  67 001c 2D4B     		ldr	r3, .L21+4
  68 001e D3F81038 		ldr	r3, [r3, #2064]
  69              		.loc 1 12 34 discriminator 1 view .LVU10
  70 0022 13F4005F 		tst	r3, #8192
  71 0026 F9D0     		beq	.L6
  13:Core/Src/main.c **** 
  14:Core/Src/main.c ****             buttonPressCount++; // 增加按钮按下计数
  72              		.loc 1 14 13 is_stmt 1 view .LVU11
  73              		.loc 1 14 29 is_stmt 0 view .LVU12
  74 0028 0131     		adds	r1, r1, #1
  75              	.LVL2:
  76              		.loc 1 14 29 view .LVU13
  77 002a C9B2     		uxtb	r1, r1
  78              	.LVL3:
  15:Core/Src/main.c **** 
  16:Core/Src/main.c ****             if (buttonPressCount <= 4) {
  79              		.loc 1 16 13 is_stmt 1 view .LVU14
  80              		.loc 1 16 16 is_stmt 0 view .LVU15
  81 002c 0429     		cmp	r1, #4
  82 002e 25D8     		bhi	.L7
  17:Core/Src/main.c ****                 // 点亮下一个LED
  18:Core/Src/main.c ****                 if (ledIndex == 0) {
  83              		.loc 1 18 17 is_stmt 1 view .LVU16
  84 0030 0328     		cmp	r0, #3
  85 0032 07D8     		bhi	.L8
  86 0034 DFE800F0 		tbb	[pc, r0]
  87              	.L10:
  88 0038 02       		.byte	(.L13-.L10)/2
  89 0039 11       		.byte	(.L12-.L10)/2
  90 003a 16       		.byte	(.L11-.L10)/2
  91 003b 1C       		.byte	(.L9-.L10)/2
  92              		.p2align 1
  93              	.L13:
  19:Core/Src/main.c ****                     SET_GPIO_B(0);  // PB0
  94              		.loc 1 19 21 view .LVU17
  95 003c 254B     		ldr	r3, .L21+4
ARM GAS  C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s 			page 3


  96 003e 0122     		movs	r2, #1
  97 0040 C3F81824 		str	r2, [r3, #1048]
  98              	.L8:
  20:Core/Src/main.c ****                 } else if (ledIndex == 1) {
  21:Core/Src/main.c ****                     SET_GPIO_B(7);  // PB7
  22:Core/Src/main.c ****                 } else if (ledIndex == 2) {
  23:Core/Src/main.c ****                     SET_GPIO_B(14); // PB14
  24:Core/Src/main.c ****                 } else if (ledIndex == 3) {
  25:Core/Src/main.c ****                     SET_GPIO_B(15); // PB15
  26:Core/Src/main.c ****                 }
  27:Core/Src/main.c ****                 ledIndex++;
  99              		.loc 1 27 17 view .LVU18
 100              		.loc 1 27 25 is_stmt 0 view .LVU19
 101 0044 0130     		adds	r0, r0, #1
 102              	.LVL4:
 103              		.loc 1 27 25 view .LVU20
 104 0046 C0B2     		uxtb	r0, r0
 105              	.LVL5:
 106              	.L3:
   8:Core/Src/main.c ****         // 检测按钮是否按下
 107              		.loc 1 8 5 is_stmt 1 view .LVU21
  10:Core/Src/main.c ****             for (volatile int i = 0; i < 100000; i++); // 简单去抖动
 108              		.loc 1 10 9 view .LVU22
  10:Core/Src/main.c ****             for (volatile int i = 0; i < 100000; i++); // 简单去抖动
 109              		.loc 1 10 12 is_stmt 0 view .LVU23
 110 0048 224B     		ldr	r3, .L21+4
 111 004a D3F81038 		ldr	r3, [r3, #2064]
  10:Core/Src/main.c ****             for (volatile int i = 0; i < 100000; i++); // 简单去抖动
 112              		.loc 1 10 11 view .LVU24
 113 004e 13F4005F 		tst	r3, #8192
 114 0052 F9D1     		bne	.L3
  11:Core/Src/main.c ****             while (READ_GPIO_C13 == 0); // 等待按钮释放
 115              		.loc 1 11 13 is_stmt 1 view .LVU25
 116              	.LBB3:
  11:Core/Src/main.c ****             while (READ_GPIO_C13 == 0); // 等待按钮释放
 117              		.loc 1 11 18 view .LVU26
  11:Core/Src/main.c ****             while (READ_GPIO_C13 == 0); // 等待按钮释放
 118              		.loc 1 11 31 is_stmt 0 view .LVU27
 119 0054 0023     		movs	r3, #0
 120 0056 0193     		str	r3, [sp, #4]
  11:Core/Src/main.c ****             while (READ_GPIO_C13 == 0); // 等待按钮释放
 121              		.loc 1 11 13 view .LVU28
 122 0058 DCE7     		b	.L4
 123              	.L12:
  11:Core/Src/main.c ****             while (READ_GPIO_C13 == 0); // 等待按钮释放
 124              		.loc 1 11 13 view .LVU29
 125              	.LBE3:
  21:Core/Src/main.c ****                 } else if (ledIndex == 2) {
 126              		.loc 1 21 21 is_stmt 1 view .LVU30
 127 005a 1E4B     		ldr	r3, .L21+4
 128 005c 8022     		movs	r2, #128
 129 005e C3F81824 		str	r2, [r3, #1048]
 130 0062 EFE7     		b	.L8
 131              	.L11:
  23:Core/Src/main.c ****                 } else if (ledIndex == 3) {
 132              		.loc 1 23 21 view .LVU31
 133 0064 1B4B     		ldr	r3, .L21+4
ARM GAS  C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s 			page 4


 134 0066 4FF48042 		mov	r2, #16384
 135 006a C3F81824 		str	r2, [r3, #1048]
 136 006e E9E7     		b	.L8
 137              	.L9:
  25:Core/Src/main.c ****                 }
 138              		.loc 1 25 21 view .LVU32
 139 0070 184B     		ldr	r3, .L21+4
 140 0072 4FF40042 		mov	r2, #32768
 141 0076 C3F81824 		str	r2, [r3, #1048]
 142 007a E3E7     		b	.L8
 143              	.L7:
  28:Core/Src/main.c ****             } 
  29:Core/Src/main.c ****             else if (buttonPressCount == 5) {
 144              		.loc 1 29 18 view .LVU33
 145              		.loc 1 29 21 is_stmt 0 view .LVU34
 146 007c 0529     		cmp	r1, #5
 147 007e 03D0     		beq	.L19
  30:Core/Src/main.c ****                 // 熄灭所有LED并重置
  31:Core/Src/main.c ****                 RESET_GPIO_B(0);   // PB0
  32:Core/Src/main.c ****                 RESET_GPIO_B(7);   // PB7
  33:Core/Src/main.c ****                 RESET_GPIO_B(14);  // PB14
  34:Core/Src/main.c ****                 RESET_GPIO_B(15);  // PB15
  35:Core/Src/main.c ****                 ledIndex = 0; // 重置LED索引
  36:Core/Src/main.c ****             } 
  37:Core/Src/main.c ****             else if (buttonPressCount == 6) {
 148              		.loc 1 37 18 is_stmt 1 view .LVU35
 149              		.loc 1 37 21 is_stmt 0 view .LVU36
 150 0080 0629     		cmp	r1, #6
 151 0082 14D0     		beq	.L20
  38:Core/Src/main.c ****                 // 点亮所有LED
  39:Core/Src/main.c ****                 SET_GPIO_B(0);   // PB0
  40:Core/Src/main.c ****                 SET_GPIO_B(7);   // PB7
  41:Core/Src/main.c ****                 SET_GPIO_B(14);  // PB14
  42:Core/Src/main.c ****                 SET_GPIO_B(15);  // PB15
  43:Core/Src/main.c ****             } 
  44:Core/Src/main.c ****             else {
  45:Core/Src/main.c ****                 // 超过六次按下，重置计数
  46:Core/Src/main.c ****                 buttonPressCount = 0;
 152              		.loc 1 46 34 view .LVU37
 153 0084 0021     		movs	r1, #0
 154              	.LVL6:
 155              		.loc 1 46 34 view .LVU38
 156 0086 DFE7     		b	.L3
 157              	.LVL7:
 158              	.L19:
  31:Core/Src/main.c ****                 RESET_GPIO_B(7);   // PB7
 159              		.loc 1 31 17 is_stmt 1 view .LVU39
 160 0088 124B     		ldr	r3, .L21+4
 161 008a 4FF48032 		mov	r2, #65536
 162 008e C3F81824 		str	r2, [r3, #1048]
  32:Core/Src/main.c ****                 RESET_GPIO_B(14);  // PB14
 163              		.loc 1 32 17 view .LVU40
 164 0092 4FF40002 		mov	r2, #8388608
 165 0096 C3F81824 		str	r2, [r3, #1048]
  33:Core/Src/main.c ****                 RESET_GPIO_B(15);  // PB15
 166              		.loc 1 33 17 view .LVU41
 167 009a 4FF08042 		mov	r2, #1073741824
ARM GAS  C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s 			page 5


 168 009e C3F81824 		str	r2, [r3, #1048]
  34:Core/Src/main.c ****                 ledIndex = 0; // 重置LED索引
 169              		.loc 1 34 17 view .LVU42
 170 00a2 4FF00042 		mov	r2, #-2147483648
 171 00a6 C3F81824 		str	r2, [r3, #1048]
  35:Core/Src/main.c ****             } 
 172              		.loc 1 35 17 view .LVU43
 173              	.LVL8:
  35:Core/Src/main.c ****             } 
 174              		.loc 1 35 26 is_stmt 0 view .LVU44
 175 00aa 0020     		movs	r0, #0
 176 00ac CCE7     		b	.L3
 177              	.LVL9:
 178              	.L20:
  39:Core/Src/main.c ****                 SET_GPIO_B(7);   // PB7
 179              		.loc 1 39 17 is_stmt 1 view .LVU45
 180 00ae 094B     		ldr	r3, .L21+4
 181 00b0 0122     		movs	r2, #1
 182 00b2 C3F81824 		str	r2, [r3, #1048]
  40:Core/Src/main.c ****                 SET_GPIO_B(14);  // PB14
 183              		.loc 1 40 17 view .LVU46
 184 00b6 8022     		movs	r2, #128
 185 00b8 C3F81824 		str	r2, [r3, #1048]
  41:Core/Src/main.c ****                 SET_GPIO_B(15);  // PB15
 186              		.loc 1 41 17 view .LVU47
 187 00bc 4FF48042 		mov	r2, #16384
 188 00c0 C3F81824 		str	r2, [r3, #1048]
  42:Core/Src/main.c ****             } 
 189              		.loc 1 42 17 view .LVU48
 190 00c4 4FF40042 		mov	r2, #32768
 191 00c8 C3F81824 		str	r2, [r3, #1048]
 192 00cc BCE7     		b	.L3
 193              	.L22:
 194 00ce 00BF     		.align	2
 195              	.L21:
 196 00d0 9F860100 		.word	99999
 197 00d4 00000240 		.word	1073872896
 198              		.cfi_endproc
 199              	.LFE130:
 201              		.text
 202              	.Letext0:
 203              		.file 2 "E:/TPU_Work/one_chip_computer/first_homework/Tools/xpack-arm-none-eabi-gcc-13.2.1-1.1-win
 204              		.file 3 "E:/TPU_Work/one_chip_computer/first_homework/Tools/xpack-arm-none-eabi-gcc-13.2.1-1.1-win
 205              		.file 4 "Core/Inc/init.h"
ARM GAS  C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s:21     .text.main:00000000 $t
C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s:27     .text.main:00000000 main
C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s:88     .text.main:00000038 $d
C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s:92     .text.main:0000003c $t
C:\Users\admin\AppData\Local\Temp\ccIQGXyT.s:196    .text.main:000000d0 $d

UNDEFINED SYMBOLS
GPIO_Ini
